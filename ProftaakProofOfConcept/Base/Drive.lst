   1               		.file	"Drive.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               	.global	saveSpeedData
  12               	saveSpeedData:
  13               	.LFB1:
  14               		.file 1 "Drive.c"
   1:Drive.c       **** #include "Drive.h"
   2:Drive.c       **** #include "RP6uart.h"
   3:Drive.c       **** 
   4:Drive.c       **** //====================================================================================
   5:Drive.c       **** // Drive
   6:Drive.c       **** //====================================================================================
   7:Drive.c       **** 
   8:Drive.c       **** uint8_t speedArraySize = 15;
   9:Drive.c       **** uint8_t speedArrayIndexToWriteTo = 0;
  10:Drive.c       **** struct speedData sData;
  11:Drive.c       **** 
  12:Drive.c       **** 
  13:Drive.c       **** void saveSpeedData(uint8_t leftSpeed, uint8_t speedRight) 
  14:Drive.c       **** {
  15               		.loc 1 14 0
  16               		.cfi_startproc
  17               	.LVL0:
  18               	/* prologue: function */
  19               	/* frame size = 0 */
  20               	/* stack size = 0 */
  21               	.L__stack_usage = 0
  15:Drive.c       **** 	sData.speedLeft = leftSpeed;
  22               		.loc 1 15 0
  23 0000 8093 0000 		sts sData,r24
  16:Drive.c       **** 	sData.speedRight = speedRight;
  24               		.loc 1 16 0
  25 0004 6093 0000 		sts sData+1,r22
  17:Drive.c       **** 
  18:Drive.c       **** 	sDataArray[speedArrayIndexToWriteTo] = sData;
  26               		.loc 1 18 0
  27 0008 2091 0000 		lds r18,speedArrayIndexToWriteTo
  28 000c E22F      		mov r30,r18
  29 000e F0E0      		ldi r31,0
  30 0010 EE0F      		lsl r30
  31 0012 FF1F      		rol r31
  32               	.LVL1:
  33 0014 E050      		subi r30,lo8(-(sDataArray))
  34 0016 F040      		sbci r31,hi8(-(sDataArray))
  35 0018 8091 0000 		lds r24,sData
  36 001c 9091 0000 		lds r25,sData+1
  37 0020 9183      		std Z+1,r25
  38 0022 8083      		st Z,r24
  19:Drive.c       **** 	speedArrayIndexToWriteTo++;
  39               		.loc 1 19 0
  40 0024 81E0      		ldi r24,lo8(1)
  41 0026 820F      		add r24,r18
  42 0028 8093 0000 		sts speedArrayIndexToWriteTo,r24
  20:Drive.c       **** 
  21:Drive.c       **** 	if(speedArrayIndexToWriteTo == speedArraySize)
  43               		.loc 1 21 0
  44 002c 9091 0000 		lds r25,speedArraySize
  45 0030 8913      		cpse r24,r25
  46 0032 00C0      		rjmp .L1
  22:Drive.c       **** 	{
  23:Drive.c       **** 		speedArrayIndexToWriteTo = 0;
  47               		.loc 1 23 0
  48 0034 1092 0000 		sts speedArrayIndexToWriteTo,__zero_reg__
  49               	.L1:
  50 0038 0895      		ret
  51               		.cfi_endproc
  52               	.LFE1:
  54               	.global	calculateAverageLeftSpeed
  56               	calculateAverageLeftSpeed:
  57               	.LFB2:
  24:Drive.c       **** 	}
  25:Drive.c       **** }
  26:Drive.c       **** 
  27:Drive.c       **** uint16_t calculateAverageLeftSpeed(void)
  28:Drive.c       **** {
  58               		.loc 1 28 0
  59               		.cfi_startproc
  60               	/* prologue: function */
  61               	/* frame size = 0 */
  62               	/* stack size = 0 */
  63               	.L__stack_usage = 0
  64               	.LVL2:
  65               	.LBB2:
  29:Drive.c       **** 	uint16_t sum = 0;
  30:Drive.c       **** 
  31:Drive.c       **** 	for(uint8_t i = 0; i < speedArraySize; i++)
  66               		.loc 1 31 0
  67 003a 2091 0000 		lds r18,speedArraySize
  68 003e E0E0      		ldi r30,lo8(sDataArray)
  69 0040 F0E0      		ldi r31,hi8(sDataArray)
  70 0042 60E0      		ldi r22,0
  71               	.LBE2:
  29:Drive.c       **** 	uint16_t sum = 0;
  72               		.loc 1 29 0
  73 0044 80E0      		ldi r24,0
  74 0046 90E0      		ldi r25,0
  75               	.LVL3:
  76               	.L5:
  77               	.LBB3:
  78               		.loc 1 31 0 discriminator 1
  79 0048 6217      		cp r22,r18
  80 004a 01F0      		breq .L7
  32:Drive.c       **** 	{
  33:Drive.c       **** 		sum += sDataArray[i].speedLeft;
  81               		.loc 1 33 0 discriminator 2
  82 004c 3081      		ld r19,Z
  83 004e 830F      		add r24,r19
  84 0050 911D      		adc r25,__zero_reg__
  85               	.LVL4:
  31:Drive.c       **** 	for(uint8_t i = 0; i < speedArraySize; i++)
  86               		.loc 1 31 0 discriminator 2
  87 0052 6F5F      		subi r22,lo8(-(1))
  88               	.LVL5:
  89 0054 3296      		adiw r30,2
  90 0056 00C0      		rjmp .L5
  91               	.L7:
  92               	.LVL6:
  93               	.LBE3:
  34:Drive.c       **** 	}
  35:Drive.c       **** 
  36:Drive.c       **** 	uint16_t average = sum/speedArraySize;
  94               		.loc 1 36 0
  95 0058 70E0      		ldi r23,0
  96 005a 0E94 0000 		call __udivmodhi4
  97               	.LVL7:
  98 005e CB01      		movw r24,r22
  37:Drive.c       **** 
  38:Drive.c       **** 	return average;
  39:Drive.c       **** }
  99               		.loc 1 39 0
 100 0060 0895      		ret
 101               		.cfi_endproc
 102               	.LFE2:
 104               	.global	calculateAverageRightSpeed
 106               	calculateAverageRightSpeed:
 107               	.LFB3:
  40:Drive.c       **** 
  41:Drive.c       **** uint16_t calculateAverageRightSpeed(void)
  42:Drive.c       **** {
 108               		.loc 1 42 0
 109               		.cfi_startproc
 110               	/* prologue: function */
 111               	/* frame size = 0 */
 112               	/* stack size = 0 */
 113               	.L__stack_usage = 0
 114               	.LVL8:
 115               	.LBB4:
  43:Drive.c       **** 	uint16_t sum = 0;
  44:Drive.c       **** 
  45:Drive.c       **** 	for(uint8_t i = 0; i < speedArraySize; i++)
 116               		.loc 1 45 0
 117 0062 2091 0000 		lds r18,speedArraySize
 118 0066 E0E0      		ldi r30,lo8(sDataArray+1)
 119 0068 F0E0      		ldi r31,hi8(sDataArray+1)
 120 006a 60E0      		ldi r22,0
 121               	.LBE4:
  43:Drive.c       **** 	uint16_t sum = 0;
 122               		.loc 1 43 0
 123 006c 80E0      		ldi r24,0
 124 006e 90E0      		ldi r25,0
 125               	.LVL9:
 126               	.L9:
 127               	.LBB5:
 128               		.loc 1 45 0 discriminator 1
 129 0070 6217      		cp r22,r18
 130 0072 01F0      		breq .L11
  46:Drive.c       **** 	{
  47:Drive.c       **** 		sum += sDataArray[i].speedRight;
 131               		.loc 1 47 0 discriminator 2
 132 0074 3081      		ld r19,Z
 133 0076 830F      		add r24,r19
 134 0078 911D      		adc r25,__zero_reg__
 135               	.LVL10:
  45:Drive.c       **** 	for(uint8_t i = 0; i < speedArraySize; i++)
 136               		.loc 1 45 0 discriminator 2
 137 007a 6F5F      		subi r22,lo8(-(1))
 138               	.LVL11:
 139 007c 3296      		adiw r30,2
 140 007e 00C0      		rjmp .L9
 141               	.L11:
 142               	.LVL12:
 143               	.LBE5:
  48:Drive.c       **** 	}
  49:Drive.c       **** 
  50:Drive.c       **** 	uint16_t average = sum/speedArraySize;
 144               		.loc 1 50 0
 145 0080 70E0      		ldi r23,0
 146 0082 0E94 0000 		call __udivmodhi4
 147               	.LVL13:
 148 0086 CB01      		movw r24,r22
  51:Drive.c       **** 	
  52:Drive.c       **** 	return average;
  53:Drive.c       **** }
 149               		.loc 1 53 0
 150 0088 0895      		ret
 151               		.cfi_endproc
 152               	.LFE3:
 154               		.section	.rodata.str1.1,"aMS",@progbits,1
 155               	.LC0:
 156 0000 496E 6465 		.string	"Index "
 156      7820 00
 157               	.LC1:
 158 0007 2063 6861 		.string	" changed."
 158      6E67 6564 
 158      2E00 
 159               	.LC2:
 160 0011 5370 6565 		.string	"Speed "
 160      6420 00
 161               	.LC3:
 162 0018 206C 6566 		.string	" left: "
 162      743A 2000 
 163               	.LC4:
 164 0020 2053 7065 		.string	" Speed "
 164      6564 2000 
 165               	.LC5:
 166 0028 2072 6967 		.string	" right: "
 166      6874 3A20 
 166      00
 167               		.text
 168               	.global	writeSpeed
 170               	writeSpeed:
 171               	.LFB4:
  54:Drive.c       **** 
  55:Drive.c       **** void writeSpeed(void)
  56:Drive.c       **** {
 172               		.loc 1 56 0
 173               		.cfi_startproc
 174 008a FF92      		push r15
 175               	.LCFI0:
 176               		.cfi_def_cfa_offset 3
 177               		.cfi_offset 15, -2
 178 008c 0F93      		push r16
 179               	.LCFI1:
 180               		.cfi_def_cfa_offset 4
 181               		.cfi_offset 16, -3
 182 008e 1F93      		push r17
 183               	.LCFI2:
 184               		.cfi_def_cfa_offset 5
 185               		.cfi_offset 17, -4
 186 0090 CF93      		push r28
 187               	.LCFI3:
 188               		.cfi_def_cfa_offset 6
 189               		.cfi_offset 28, -5
 190 0092 DF93      		push r29
 191               	.LCFI4:
 192               		.cfi_def_cfa_offset 7
 193               		.cfi_offset 29, -6
 194               	/* prologue: function */
 195               	/* frame size = 0 */
 196               	/* stack size = 5 */
 197               	.L__stack_usage = 5
  57:Drive.c       **** 
  58:Drive.c       **** 	writeString("Index ");
 198               		.loc 1 58 0
 199 0094 80E0      		ldi r24,lo8(.LC0)
 200 0096 90E0      		ldi r25,hi8(.LC0)
 201 0098 0E94 0000 		call writeString
 202               	.LVL14:
  59:Drive.c       **** 	writeInteger((speedArrayIndexToWriteTo -1), DEC);
 203               		.loc 1 59 0
 204 009c 8091 0000 		lds r24,speedArrayIndexToWriteTo
 205 00a0 90E0      		ldi r25,0
 206 00a2 6AE0      		ldi r22,lo8(10)
 207 00a4 0197      		sbiw r24,1
 208 00a6 0E94 0000 		call writeInteger
 209               	.LVL15:
  60:Drive.c       **** 	writeString(" changed.");
 210               		.loc 1 60 0
 211 00aa 80E0      		ldi r24,lo8(.LC1)
 212 00ac 90E0      		ldi r25,hi8(.LC1)
 213 00ae 0E94 0000 		call writeString
 214               	.LVL16:
  61:Drive.c       **** 	writeChar('\n');
 215               		.loc 1 61 0
 216 00b2 8AE0      		ldi r24,lo8(10)
 217 00b4 0E94 0000 		call writeChar
 218               	.LVL17:
 219               	.LBB6:
  62:Drive.c       **** 
  63:Drive.c       **** 	for(uint8_t index = 0; index < speedArraySize; index++)
 220               		.loc 1 63 0
 221 00b8 F12C      		mov r15,__zero_reg__
 222               	.LVL18:
 223               	.L13:
 224               		.loc 1 63 0 is_stmt 0 discriminator 1
 225 00ba 8091 0000 		lds r24,speedArraySize
 226 00be F816      		cp r15,r24
 227 00c0 00F4      		brsh .L15
  64:Drive.c       **** 	{	
  65:Drive.c       **** 		writeString("Speed ");
 228               		.loc 1 65 0 is_stmt 1 discriminator 2
 229 00c2 80E0      		ldi r24,lo8(.LC2)
 230 00c4 90E0      		ldi r25,hi8(.LC2)
 231 00c6 0E94 0000 		call writeString
 232               	.LVL19:
  66:Drive.c       **** 		writeInteger(index, DEC);
 233               		.loc 1 66 0 discriminator 2
 234 00ca 0F2D      		mov r16,r15
 235 00cc 10E0      		ldi r17,0
 236 00ce 6AE0      		ldi r22,lo8(10)
 237 00d0 C801      		movw r24,r16
 238 00d2 0E94 0000 		call writeInteger
 239               	.LVL20:
  67:Drive.c       **** 		writeString(" left: ");
 240               		.loc 1 67 0 discriminator 2
 241 00d6 80E0      		ldi r24,lo8(.LC3)
 242 00d8 90E0      		ldi r25,hi8(.LC3)
 243 00da 0E94 0000 		call writeString
 244               	.LVL21:
  68:Drive.c       **** 		writeInteger(sDataArray[index].speedLeft, DEC);
 245               		.loc 1 68 0 discriminator 2
 246 00de E801      		movw r28,r16
 247 00e0 CC0F      		lsl r28
 248 00e2 DD1F      		rol r29
 249 00e4 C050      		subi r28,lo8(-(sDataArray))
 250 00e6 D040      		sbci r29,hi8(-(sDataArray))
 251 00e8 8881      		ld r24,Y
 252 00ea 6AE0      		ldi r22,lo8(10)
 253 00ec 90E0      		ldi r25,0
 254 00ee 0E94 0000 		call writeInteger
 255               	.LVL22:
  69:Drive.c       **** 
  70:Drive.c       **** 		writeString(" Speed ");
 256               		.loc 1 70 0 discriminator 2
 257 00f2 80E0      		ldi r24,lo8(.LC4)
 258 00f4 90E0      		ldi r25,hi8(.LC4)
 259 00f6 0E94 0000 		call writeString
 260               	.LVL23:
  71:Drive.c       **** 		writeInteger(index, DEC);
 261               		.loc 1 71 0 discriminator 2
 262 00fa 6AE0      		ldi r22,lo8(10)
 263 00fc C801      		movw r24,r16
 264 00fe 0E94 0000 		call writeInteger
 265               	.LVL24:
  72:Drive.c       **** 		writeString(" right: ");
 266               		.loc 1 72 0 discriminator 2
 267 0102 80E0      		ldi r24,lo8(.LC5)
 268 0104 90E0      		ldi r25,hi8(.LC5)
 269 0106 0E94 0000 		call writeString
 270               	.LVL25:
  73:Drive.c       **** 		writeInteger(sDataArray[index].speedRight, DEC);
 271               		.loc 1 73 0 discriminator 2
 272 010a 8981      		ldd r24,Y+1
 273 010c 6AE0      		ldi r22,lo8(10)
 274 010e 90E0      		ldi r25,0
 275 0110 0E94 0000 		call writeInteger
 276               	.LVL26:
  74:Drive.c       **** 		writeChar('\n');
 277               		.loc 1 74 0 discriminator 2
 278 0114 8AE0      		ldi r24,lo8(10)
 279 0116 0E94 0000 		call writeChar
 280               	.LVL27:
  63:Drive.c       **** 	for(uint8_t index = 0; index < speedArraySize; index++)
 281               		.loc 1 63 0 discriminator 2
 282 011a F394      		inc r15
 283               	.LVL28:
 284 011c 00C0      		rjmp .L13
 285               	.L15:
 286               	.LBE6:
  75:Drive.c       **** 	}
  76:Drive.c       **** 
  77:Drive.c       **** 	writeChar('\n');
 287               		.loc 1 77 0
 288 011e 8AE0      		ldi r24,lo8(10)
 289 0120 0E94 0000 		call writeChar
 290               	.LVL29:
  78:Drive.c       **** 	writeChar('\n');
 291               		.loc 1 78 0
 292 0124 8AE0      		ldi r24,lo8(10)
 293               	/* epilogue start */
  79:Drive.c       **** }
 294               		.loc 1 79 0
 295 0126 DF91      		pop r29
 296 0128 CF91      		pop r28
 297 012a 1F91      		pop r17
 298 012c 0F91      		pop r16
 299 012e FF90      		pop r15
 300               	.LVL30:
  78:Drive.c       **** 	writeChar('\n');
 301               		.loc 1 78 0
 302 0130 0C94 0000 		jmp writeChar
 303               	.LVL31:
 304               		.cfi_endproc
 305               	.LFE4:
 307               		.comm	sData,2,1
 308               	.global	speedArrayIndexToWriteTo
 309               		.section .bss
 312               	speedArrayIndexToWriteTo:
 313 0000 00        		.zero	1
 314               	.global	speedArraySize
 315               		.data
 318               	speedArraySize:
 319 0000 0F        		.byte	15
 320               		.comm	sDataArray,30,1
 321               		.text
 322               	.Letext0:
 323               		.file 2 "/usr/lib/avr/include/stdint.h"
 324               		.file 3 "Drive.h"
 325               		.file 4 "../../../RP6Lib/RP6common/RP6uart.h"
DEFINED SYMBOLS
                            *ABS*:00000000 Drive.c
     /tmp/ccWO4xGK.s:2      *ABS*:0000003e __SP_H__
     /tmp/ccWO4xGK.s:3      *ABS*:0000003d __SP_L__
     /tmp/ccWO4xGK.s:4      *ABS*:0000003f __SREG__
     /tmp/ccWO4xGK.s:5      *ABS*:00000000 __tmp_reg__
     /tmp/ccWO4xGK.s:6      *ABS*:00000001 __zero_reg__
     /tmp/ccWO4xGK.s:12     .text:00000000 saveSpeedData
                            *COM*:00000002 sData
     /tmp/ccWO4xGK.s:312    .bss:00000000 speedArrayIndexToWriteTo
                            *COM*:0000001e sDataArray
     /tmp/ccWO4xGK.s:318    .data:00000000 speedArraySize
     /tmp/ccWO4xGK.s:56     .text:0000003a calculateAverageLeftSpeed
     /tmp/ccWO4xGK.s:106    .text:00000062 calculateAverageRightSpeed
     /tmp/ccWO4xGK.s:170    .text:0000008a writeSpeed

UNDEFINED SYMBOLS
__udivmodhi4
writeString
writeInteger
writeChar
__do_copy_data
__do_clear_bss
